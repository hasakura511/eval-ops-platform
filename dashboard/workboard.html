<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Control Room · Workboard</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body class="portrait">
  <header class="site-header">
    <div class="brand">
      <span class="brand-title">Control Room</span>
      <span class="brand-subtitle">Workboard</span>
    </div>
    <nav class="nav">
      <a class="nav-link active" href="workboard.html">Workboard</a>
      <a class="nav-link" href="hierarchy.html">Hierarchy</a>
      <a class="nav-link" href="index.html">Summary</a>
      <a class="nav-link" href="operations.html">Operations</a>
      <a class="nav-link" href="records.html">Records</a>
    </nav>
  </header>

  <main class="layout control-layout">
    <section class="panel control-header">
      <div class="panel-header">
        <h1>
          <span class="info-wrap">Workboard
            <button class="info-button" type="button" aria-label="About Workboard" aria-describedby="info-workboard-title">?</button>
            <span id="info-workboard-title" role="tooltip" class="info-tooltip">Portrait monitoring view for triage. Shows live runs, failures, and next actions.</span>
          </span>
        </h1>
        <div class="status">
          <span class="info-wrap">Snapshot Status
            <button class="info-button" type="button" aria-label="About Snapshot Status" aria-describedby="info-workboard-status">?</button>
            <span id="info-workboard-status" role="tooltip" class="info-tooltip">Live indicates the snapshot loaded successfully. Offline means the poller failed.</span>
          </span>
          <span class="status-pill" id="snapshot-status">—</span>
        </div>
      </div>
      <div class="meta-grid">
        <div>
          <h3>
            <span class="info-wrap">As of
              <button class="info-button" type="button" aria-label="About As of" aria-describedby="info-workboard-asof">?</button>
              <span id="info-workboard-asof" role="tooltip" class="info-tooltip">Timestamp of the snapshot used to render this page (ISO-8601).</span>
            </span>
          </h3>
          <p id="snapshot-time">—</p>
        </div>
        <div>
          <h3>
            <span class="info-wrap">Health
              <button class="info-button" type="button" aria-label="About Health" aria-describedby="info-workboard-health">?</button>
              <span id="info-workboard-health" role="tooltip" class="info-tooltip">Overall data health indicator. TODO: define exact thresholds and meanings.</span>
            </span>
          </h3>
          <p id="snapshot-health">—</p>
        </div>
        <div>
          <h3>
            <span class="info-wrap">Freshness
              <button class="info-button" type="button" aria-label="About Freshness" aria-describedby="info-workboard-freshness">?</button>
              <span id="info-workboard-freshness" role="tooltip" class="info-tooltip">Age of the snapshot in seconds. Lower is better; high values indicate stale data.</span>
            </span>
          </h3>
          <p id="snapshot-freshness">—</p>
        </div>
        <div>
          <h3>
            <span class="info-wrap">Alerts
              <button class="info-button" type="button" aria-label="About Alerts count" aria-describedby="info-workboard-alerts">?</button>
              <span id="info-workboard-alerts" role="tooltip" class="info-tooltip">Count of active alerts in the snapshot. High counts require triage.</span>
            </span>
          </h3>
          <p id="snapshot-alerts">—</p>
        </div>
      </div>
    </section>

    <section class="panel filters">
      <h2>
        <span class="info-wrap">Filters
          <button class="info-button" type="button" aria-label="About Filters" aria-describedby="info-workboard-filters">?</button>
          <span id="info-workboard-filters" role="tooltip" class="info-tooltip">Client-side filters for narrowing the run list. Does not change backend data.</span>
        </span>
      </h2>
      <div class="filter-grid">
        <label>
          <span class="info-wrap">Project
            <button class="info-button" type="button" aria-label="About Project filter" aria-describedby="info-workboard-filter-project">?</button>
            <span id="info-workboard-filter-project" role="tooltip" class="info-tooltip">Select a project to filter runs by scope.</span>
          </span>
          <select id="filter-project"></select>
        </label>
        <label>
          <span class="info-wrap">Track
            <button class="info-button" type="button" aria-label="About Track filter" aria-describedby="info-workboard-filter-track">?</button>
            <span id="info-workboard-filter-track" role="tooltip" class="info-tooltip">Filter by track type (bilingual, redteam, media, etc.).</span>
          </span>
          <select id="filter-track"></select>
        </label>
        <label>
          <span class="info-wrap">Status
            <button class="info-button" type="button" aria-label="About Status filter" aria-describedby="info-workboard-filter-status">?</button>
            <span id="info-workboard-filter-status" role="tooltip" class="info-tooltip">Filter by run status (running, failed, pending, blocked).</span>
          </span>
          <select id="filter-status"></select>
        </label>
        <label>
          <span class="info-wrap">Owner
            <button class="info-button" type="button" aria-label="About Owner filter" aria-describedby="info-workboard-filter-owner">?</button>
            <span id="info-workboard-filter-owner" role="tooltip" class="info-tooltip">Filter runs by current owner or agent.</span>
          </span>
          <select id="filter-owner"></select>
        </label>
        <label class="filter-search">
          <span class="info-wrap">Search
            <button class="info-button" type="button" aria-label="About Search filter" aria-describedby="info-workboard-filter-search">?</button>
            <span id="info-workboard-filter-search" role="tooltip" class="info-tooltip">Search by run ID, owner name, or next action text.</span>
          </span>
          <input id="filter-search" type="search" placeholder="Run id, owner, next action" />
        </label>
      </div>
    </section>

    <section class="panel">
      <h2>
        <span class="info-wrap">Failure Spotlight
          <button class="info-button" type="button" aria-label="About Failure Spotlight" aria-describedby="info-workboard-spotlight">?</button>
          <span id="info-workboard-spotlight" role="tooltip" class="info-tooltip">Top failing runs by failure count. Prioritize these for immediate triage.</span>
        </span>
      </h2>
      <div id="failure-spotlight" class="spotlight"></div>
    </section>

    <section class="panel">
      <h2>
        <span class="info-wrap">Workboard Runs
          <button class="info-button" type="button" aria-label="About Workboard Runs" aria-describedby="info-workboard-runs">?</button>
          <span id="info-workboard-runs" role="tooltip" class="info-tooltip">Active and recent runs with status, owner, metrics, and todos.</span>
        </span>
      </h2>
      <div id="workboard-list" class="workboard-list"></div>
    </section>

    <section class="panel">
      <h2>
        <span class="info-wrap">Todo Feed
          <button class="info-button" type="button" aria-label="About Todo Feed" aria-describedby="info-workboard-todo-feed">?</button>
          <span id="info-workboard-todo-feed" role="tooltip" class="info-tooltip">Chronological list of recent action items across runs.</span>
        </span>
      </h2>
      <div id="todo-feed" class="todo-feed"></div>
    </section>
  </main>

  <script src="assets/control_room.js"></script>
</body>
</html>
